import java.io.BufferedReader;

import java.io.DataOutputStream;

import java.io.IOException;

import java.io.InputStream;

import java.io.InputStreamReader;

import java.net.HttpURLConnection;

import java.net.URL;

import java.net.URLEncoder;

 

public static void main(String[] args) {

             System.setProperty("http.proxyHost", "eproxy.isoco.net");

             System.setProperty("http.proxyPort", "3128");

            

             while(true){

                    HttpURLConnection connection;                 

                    DataOutputStream outStream;                          

                   

                    int cont = 0;

                          

                    while(cont < 100){                     

                           String sentence;                              

                           sentence = "Bruce Springsteen is an American singer-songwriter and multi-instrumentalist.";                            

                                 

                            for(int i=0; i<args.length; i++){

                                  sentence = sentence.concat(args[i]+" ");

                           }                                

 

                           URL url = new URL("http://sandbox-xlike.isoco.com/services/analysis_en/analyze");

                           String body = URLEncoder.encode(sentence, "UTF-8");

                           body = body.replace("+", "%20"); 

                           body = "text=" + body + "&target=entities&conll=false";

 

                           connection = (HttpURLConnection) url.openConnection();                                       

                           connection.setRequestMethod("POST");

                           connection.setDoInput(true);

                           connection.setDoOutput(true);

                           connection.setUseCaches(false);

                           connection.setRequestProperty("Content-Length",

                                               "" + Integer.toString(body.getBytes().length));

                           connection.setRequestProperty("Content-Type",

                                               "application/x-www-form-urlencoded");

 

                           System.out.println("Enviando POST...");                           

                           outStream = new DataOutputStream(connection.getOutputStream());                              

                           outStream.writeBytes(body);                                

                           outStream.flush();                     

                           outStream.close();                            

 

                           System.out.println("Obteniendo respuesta del servidor...");

                           //Receiving response

                           if (connection.getResponseCode() != 200) {

                                  throw new IOException(connection.getResponseMessage());

                           }

                                 

                           InputStream is = connection.getInputStream();                                   

                           BufferedReader rd = new BufferedReader(new InputStreamReader(is, "UTF-8"));                          

                           StringBuffer response = new StringBuffer();                              

                           String str;

 

                           while ((str = rd.readLine()) != null) {

                                  response.append(str);

                           }

                           rd.close();

 

                           System.out.println(response);    

                          

cont++;

}

}

 

       }